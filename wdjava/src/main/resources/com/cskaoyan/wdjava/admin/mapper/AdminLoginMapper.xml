<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cskaoyan.wdjava.admin.mapper.AdminLoginMapper">

    <resultMap id="BaseMap" type="com.cskaoyan.wdjava.admin.bean.AdminLogin">
        <result column="id" jdbcType="INTEGER" property="id"/>
        <result column="account" jdbcType="VARCHAR" property="account"/>
        <result column="pwd" jdbcType="VARCHAR" property="pwd"/>
        <result column="name" jdbcType="VARCHAR" property="name"/>
    </resultMap>
    <select id="selectMsgByAccount" resultMap="BaseMap" parameterType="string">
       select id,  account,  pwd,  name
       from admins g
       where account =  #{account,jdbcType=VARCHAR}
    </select>

    <delete id="deleteUser" parameterType="integer">
        delete from users
        where id =  #{id,jdbcType=INTEGER}
    </delete>
    <delete id="deleteAdmins" parameterType="integer">
        delete from admins
        where id =  #{id,jdbcType=INTEGER}
    </delete>

    <resultMap id="BaseToken" type="com.cskaoyan.wdjava.admin.bean.ChangePwd">
        <result column="pwd" jdbcType="VARCHAR" property="oldPwd"/>
    </resultMap>
    <select id="selectAdminByTokenName" parameterType="string" resultMap="BaseToken">
        select pwd
        from admins
        where name =  #{adminToken,jdbcType=VARCHAR}
    </select>

    <update id="updatePwd" parameterType="com.cskaoyan.wdjava.admin.bean.ChangePwd">
        update admins
        set pwd =  #{newPwd,jdbcType=VARCHAR}
        where name =  #{adminToken,jdbcType=VARCHAR}
    </update>

    <insert id="addAdminss" parameterType="com.cskaoyan.wdjava.admin.bean.AdminLogin">
         insert into admins (
                account,
                name,
                pwd
        )
        values (
                #{account,jdbcType=VARCHAR},
                #{name,jdbcType=VARCHAR},
                #{pwd,jdbcType=VARCHAR}
        )
    </insert>

    <update id="updateAdminss" parameterType="com.cskaoyan.wdjava.admin.bean.AdminLogin">
        update admins
        set
            account =  #{account,jdbcType=VARCHAR},
            name =  #{name,jdbcType=VARCHAR},
            pwd =  #{pwd,jdbcType=VARCHAR}
        where id = #{id,jdbcType=INTEGER}

    </update>

    <select id="accountaccount" parameterType="string" resultType="integer">
        select id
        from admins
        where account = #{account,jdbcType=VARCHAR}
    </select>
</mapper>
